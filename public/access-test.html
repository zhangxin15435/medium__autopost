<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¬å¼€è®¿é—®æµ‹è¯• - Medium Auto-Post</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }

        .test-card {
            background: white;
            color: #333;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .status {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px 0;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.loading {
            background: #fff3cd;
            color: #856404;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 16px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .result {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>

<body>
    <h1>ğŸŒ å…¬å¼€è®¿é—®æµ‹è¯•</h1>
    <p>æ­¤é¡µé¢ç”¨äºéªŒè¯ Medium è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿçš„å…¬å¼€è®¿é—®çŠ¶æ€</p>

    <div class="test-card">
        <h2>âœ… åŸºç¡€è®¿é—®æµ‹è¯•</h2>
        <p><span class="status success">æˆåŠŸ</span> æ‚¨èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢è¯´æ˜åŸºç¡€è®¿é—®æ­£å¸¸ï¼</p>
        <p><strong>æµ‹è¯•ç»“æœ</strong>: åº”ç”¨å·²éƒ¨ç½²ä¸”å¯å…¬å¼€è®¿é—®</p>
    </div>

    <div class="test-card">
        <h2>ğŸ”— APIè¿é€šæ€§æµ‹è¯•</h2>
        <p>æµ‹è¯•å„ä¸ªAPIç«¯ç‚¹çš„è®¿é—®æƒ…å†µï¼š</p>

        <button class="btn" onclick="testAPI('/api/articles')">æµ‹è¯•æ–‡ç« API</button>
        <button class="btn" onclick="testAPI('/api/publish', 'POST')">æµ‹è¯•å‘å¸ƒAPI</button>
        <button class="btn" onclick="testMainApp()">è®¿é—®ä¸»åº”ç”¨</button>

        <div id="api-results"></div>
    </div>

    <div class="test-card">
        <h2>ğŸ“± è®¾å¤‡å…¼å®¹æ€§</h2>
        <div id="device-info">
            <p><strong>æµè§ˆå™¨</strong>: <span id="browser"></span></p>
            <p><strong>è®¾å¤‡ç±»å‹</strong>: <span id="device"></span></p>
            <p><strong>å±å¹•å°ºå¯¸</strong>: <span id="screen"></span></p>
            <p><strong>æ”¯æŒè§¦æ§</strong>: <span id="touch"></span></p>
        </div>
    </div>

    <div class="test-card">
        <h2>ğŸ¯ è®¿é—®ç¡®è®¤</h2>
        <div class="status success">âœ… å®Œå…¨å…¬å¼€è®¿é—®</div>
        <ul>
            <li>âœ… æ— éœ€ç™»å½•Vercel</li>
            <li>âœ… æ— éœ€æ³¨å†Œè´¦æˆ·</li>
            <li>âœ… å¯ä»¥ç›´æ¥åˆ†äº«é“¾æ¥</li>
            <li>âœ… æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨</li>
            <li>âœ… æ”¯æŒç§»åŠ¨è®¾å¤‡</li>
        </ul>

        <h3>ğŸš€ ç«‹å³å¼€å§‹ä½¿ç”¨</h3>
        <button class="btn" onclick="window.location.href='/'">å‰å¾€ä¸»åº”ç”¨</button>
    </div>

    <script>
        // è®¾å¤‡ä¿¡æ¯æ£€æµ‹
        document.addEventListener('DOMContentLoaded', function () {
            // æµè§ˆå™¨ä¿¡æ¯
            const ua = navigator.userAgent;
            let browser = 'æœªçŸ¥';
            if (ua.includes('Chrome')) browser = 'Chrome';
            else if (ua.includes('Firefox')) browser = 'Firefox';
            else if (ua.includes('Safari')) browser = 'Safari';
            else if (ua.includes('Edge')) browser = 'Edge';

            // è®¾å¤‡ç±»å‹
            let device = 'æ¡Œé¢ç«¯';
            if (/Mobi|Android/i.test(ua)) device = 'ç§»åŠ¨ç«¯';
            else if (/Tablet|iPad/i.test(ua)) device = 'å¹³æ¿ç«¯';

            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('browser').textContent = browser;
            document.getElementById('device').textContent = device;
            document.getElementById('screen').textContent = window.screen.width + 'x' + window.screen.height;
            document.getElementById('touch').textContent = 'ontouchstart' in window ? 'æ˜¯' : 'å¦';
        });

        // APIæµ‹è¯•å‡½æ•°
        async function testAPI(endpoint, method = 'GET') {
            const resultsDiv = document.getElementById('api-results');
            const testId = Date.now();

            // æ·»åŠ æµ‹è¯•çŠ¶æ€
            const statusDiv = document.createElement('div');
            statusDiv.className = 'result';
            statusDiv.innerHTML = `ğŸ”„ æµ‹è¯• ${endpoint} (${method})...`;
            resultsDiv.appendChild(statusDiv);

            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    }
                };

                // å¦‚æœæ˜¯POSTè¯·æ±‚ï¼Œæ·»åŠ æµ‹è¯•æ•°æ®
                if (method === 'POST') {
                    options.body = JSON.stringify({
                        action: 'test'
                    });
                }

                const response = await fetch(endpoint, options);
                const data = await response.json();

                statusDiv.innerHTML = `âœ… ${endpoint} - çŠ¶æ€: ${response.status}\nå“åº”: ${JSON.stringify(data, null, 2)}`;
                statusDiv.style.background = '#d4edda';

            } catch (error) {
                statusDiv.innerHTML = `âŒ ${endpoint} - é”™è¯¯: ${error.message}`;
                statusDiv.style.background = '#f8d7da';
            }
        }

        // è®¿é—®ä¸»åº”ç”¨
        function testMainApp() {
            window.open('/', '_blank');
        }

        // æ˜¾ç¤ºå½“å‰æ—¶é—´
        function updateTime() {
            const now = new Date();
            document.title = `å…¬å¼€è®¿é—®æµ‹è¯• - ${now.toLocaleTimeString()}`;
        }

        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>

</html>